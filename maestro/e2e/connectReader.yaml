appId: ${APP_ID}
---
- tapOn:
    id: "discovery-method-button"
- tapOn:
    id: ${discoveryMethod}
- tapOn:
    id: "discover-readers-button"

# Wait until Discover Readers screen is visible before proceeding
- extendedWaitUntil:
    visible:
        id: "discovery-readers-screen"
    timeout: 20000

- runFlow:
    when:
        true: ${updateRequired == true}
    commands:
        - tapOn:
            id: "update-plan-picker"

- extendedWaitUntil:
    visible:
        id: "reader-0"
    timeout: 30000

- tapOn:
    id: "reader-0"
- runFlow:
    when:
        true: ${updateRequired == true}
    commands:
        - extendedWaitUntil:
            visible:
                id: "required-update-in-progress"
            timeout: 16000